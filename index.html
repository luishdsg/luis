<!DOCTYPE html>
<html lang="pt-br">

<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
            crossorigin="anonymous"></script>
      <title>Exemplo de Animação com transform: matrix3d</title>
</head>
<style>
      html,
      body {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
      }

      .GlobalCanvas {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
      }
</style>

<body>

      <div id="content">
            <div class="GlobalCanvas"><canvas width="1161" height="942" id="global-canvas"
                        style="touch-action: none; width: 1239px; height: 1005px; cursor: inherit;"></canvas></div>
      </div>
      <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
      <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/MotionPathPlugin.min.js"></script>
      <script type="module">

            // FUNCTION-ANIMATE-SCROLL
            gsap.registerPlugin(ScrollTrigger, MotionPathPlugin);
            smoothScroll("#content");
            function smoothScroll(content, viewport, smoothness) {
                  content = gsap.utils.toArray(content)[0];

                  gsap.set(viewport || content.parentNode, {
                        overflow: "hidden",
                        position: "fixed",
                        height: "100%",
                        width: "100%",
                        top: 0,
                        left: 0,
                        right: 0,
                        bottom: 0
                  });
                  gsap.set(content, { overflow: "visible", width: "100%" });

                  let getProp = gsap.getProperty(content),
                        setProp = gsap.quickSetter(content, "y", "px"),
                        removeScroll = () => (content.style.overflow = "visible"),
                        needsRefreshFix =
                              parseFloat(
                                    ScrollTrigger.version
                                          .split(".")
                                          .map((n) => ("00" + n).substr(n.length - 1, 3))
                                          .join("")
                              ) < 3006002,
                        height;

                  function onResize() {
                        height = content.clientHeight;
                        content.style.overflow = "visible";
                        document.body.style.height = height + "px";
                  }
                  onResize();
                  ScrollTrigger.addEventListener("refreshInit", onResize);
                  ScrollTrigger.addEventListener("refresh", () => {
                        removeScroll();
                        requestAnimationFrame(removeScroll);
                  });

                  ScrollTrigger.defaults({ scroller: content });

                  ScrollTrigger.prototype.update = (p) => p; // works around an issue in ScrollTrigger 3.6.1 and earlier (fixed in 3.6.2, so this line could be deleted if you're using 3.6.2 or later)

                  ScrollTrigger.scrollerProxy(content, {
                        scrollTop(value) {
                              return arguments.length ? setProp(-value) : -getProp("y");
                        },
                        getBoundingClientRect() {
                              return {
                                    top: 0,
                                    left: 0,
                                    width: window.innerWidth,
                                    height: window.innerHeight
                              };
                        }
                  });

                  gsap.fromTo(
                        content,
                        { y: 0 },
                        {
                              y: () => document.documentElement.clientHeight - height,
                              ease: "none",
                              onUpdate: ScrollTrigger.update,
                              scrollTrigger: {
                                    scroller: window,
                                    invalidateOnRefresh: true,
                                    start: 0,
                                    end: () => height - document.documentElement.clientHeight,
                                    scrub: smoothness || 3,
                                    onRefresh: (self) => {
                                          // when the screen resizes, we just want the animation to immediately go to the appropriate spot rather than animating there, so basically kill the scrub.
                                          gsap.killTweensOf(self.animation);
                                          self.animation.progress(self.progress);
                                          if (needsRefreshFix) {
                                                let all = ScrollTrigger.getAll();
                                                all.slice(all.indexOf(self) + 1).forEach((t) => t.refresh());
                                          }
                                    }
                              }
                        }
                  );
            }


            document.addEventListener("DOMContentLoaded", function () {
                  smoothScroll();
            });


      </script>
</body>

</html>